# ğŸš€ Render æ›´æ–°æŒ‡å— - ä¿®å¤ OCR é—®é¢˜

æ‚¨çš„ Render éƒ¨ç½²ç°åœ¨å·²åŒ…å«å®Œæ•´çš„ OCR æ”¯æŒï¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ›´æ–°æ‚¨çš„åº”ç”¨ã€‚

---

## âš¡ å¿«é€Ÿæ›´æ–°ï¼ˆæ¨èï¼‰

### å¦‚æœæ‚¨ä½¿ç”¨ Git è‡ªåŠ¨éƒ¨ç½²ï¼š

1. **ç¡®ä¿ä»£ç å·²æ¨é€åˆ° GitHub**
   ```bash
   git push origin main
   ```

2. **Render ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°éƒ¨ç½²**
   - è®¿é—® Render Dashboard
   - æŸ¥çœ‹ "Events" æ ‡ç­¾ï¼Œåº”è¯¥çœ‹åˆ° "Deploy started"
   - ç­‰å¾… 5-10 åˆ†é’Ÿå®Œæˆéƒ¨ç½²

3. **éªŒè¯éƒ¨ç½²æˆåŠŸ**
   ```bash
   curl https://your-app.onrender.com/health
   ```

---

### å¦‚æœéœ€è¦æ‰‹åŠ¨è§¦å‘éƒ¨ç½²ï¼š

1. **ç™»å½• Render Dashboard**
   - è®¿é—®ï¼šhttps://dashboard.render.com/

2. **é€‰æ‹©æ‚¨çš„æœåŠ¡**
   - æ‰¾åˆ° invoice-management æœåŠ¡

3. **æ‰‹åŠ¨éƒ¨ç½²**
   - ç‚¹å‡» "Manual Deploy" â†’ "Deploy latest commit"

4. **æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—**
   - ç‚¹å‡» "Logs" æ ‡ç­¾
   - ç¡®è®¤çœ‹åˆ°ï¼š
     ```
     Installing tesseract-ocr...
     Installing tesseract-ocr-chi-sim...
     Installing tesseract-ocr-chi-tra...
     ```

---

## âœ… éªŒè¯ OCR åŠŸèƒ½

### æ–¹å¼ 1ï¼šä½¿ç”¨è¯Šæ–­è„šæœ¬ï¼ˆæ¨èï¼‰

1. **è®¿é—® Render Shell**
   - Dashboard â†’ Your Service â†’ Shell

2. **è¿è¡Œè¯Šæ–­è„šæœ¬**
   ```bash
   python test_ocr.py
   ```

3. **æ£€æŸ¥è¾“å‡º**
   åº”è¯¥çœ‹åˆ°ï¼š
   ```
   âœ… Python Imports    - All packages OK
   âœ… Tesseract OCR     - Version 5.x
   âœ… Available languages: eng, chi_sim, chi_tra
   âœ… OCR Functionality - Test passed
   âœ… All systems operational!
   ```

---

### æ–¹å¼ 2ï¼šæµ‹è¯•å®é™…ä¸Šä¼ 

1. **è®¿é—®æ‚¨çš„åº”ç”¨**
   ```
   https://your-app.onrender.com/upload
   ```

2. **ä¸Šä¼ æµ‹è¯•æ–‡ä»¶**
   - ä¸Šä¼ ä¸€ä¸ª PDF æˆ–å›¾ç‰‡å‘ç¥¨
   - ç‚¹å‡»æ–‡ä»¶é€‰æ‹©å™¨

3. **è§‚å¯Ÿ OCR è‡ªåŠ¨å¡«å……**
   - OCR åº”è¯¥è‡ªåŠ¨æå–ï¼š
     - å‘ç¥¨æ—¥æœŸ
     - å‘ç¥¨å·ç 
     - å…¬å¸åç§°
     - æ€»é‡‘é¢

4. **æ£€æŸ¥å‡†ç¡®ç‡**
   - å¦‚æœå­—æ®µè¢«æ­£ç¡®å¡«å…… â†’ âœ… æˆåŠŸï¼
   - å¦‚æœä»ç„¶æ— æ³•è¯†åˆ« â†’ ç»§ç»­æ•…éšœæ’æŸ¥

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: ä»ç„¶æ˜¾ç¤º "Cannot process image files"

**æ£€æŸ¥æ­¥éª¤ï¼š**

1. **ç¡®è®¤ Dockerfile æ›´æ–°**
   ```bash
   # åœ¨é¡¹ç›®ä¸­æ£€æŸ¥
   cat Dockerfile | grep tesseract-ocr
   ```
   åº”è¯¥çœ‹åˆ°ï¼š
   ```dockerfile
   tesseract-ocr
   tesseract-ocr-eng
   tesseract-ocr-chi-sim
   tesseract-ocr-chi-tra
   ```

2. **æ£€æŸ¥éƒ¨ç½²æ—¥å¿—**
   - Render Dashboard â†’ Logs
   - æœç´¢ "tesseract"
   - ç¡®è®¤å®‰è£…æˆåŠŸ

3. **æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²**
   - Render Dashboard â†’ Settings
   - ç‚¹å‡» "Clear build cache"
   - ç‚¹å‡» "Manual Deploy"

---

### é—®é¢˜ 2: PDF å¯ä»¥è¯»å–ï¼Œä½†å›¾ç‰‡ä¸è¡Œ

**åŸå› **ï¼šOpenCV ä¾èµ–ç¼ºå¤±

**è§£å†³**ï¼š
Dockerfile å·²åŒ…å«æ‰€æœ‰ OpenCV ä¾èµ–ï¼š
```dockerfile
libgl1-mesa-glx
libglib2.0-0
libsm6
libxext6
libxrender-dev
```

**éªŒè¯**ï¼š
```bash
# åœ¨ Render Shell
python -c "import cv2; print(cv2.__version__)"
```

---

### é—®é¢˜ 3: ä¸­æ–‡å‘ç¥¨è¯†åˆ«ä¸å‡†ç¡®

**æ£€æŸ¥è¯­è¨€åŒ…ï¼š**

```bash
# åœ¨ Render Shell
tesseract --list-langs
```

åº”è¯¥åŒ…å«ï¼š
- `eng` âœ…
- `chi_sim` âœ… (ç®€ä½“ä¸­æ–‡)
- `chi_tra` âœ… (ç¹ä½“ä¸­æ–‡)

**å¦‚æœç¼ºå°‘è¯­è¨€åŒ…ï¼š**
- é‡æ–°éƒ¨ç½²
- ç¡®ä¿ Dockerfile åŒ…å« `tesseract-ocr-chi-sim` å’Œ `tesseract-ocr-chi-tra`

---

### é—®é¢˜ 4: OCR è¶…æ—¶

**ç—‡çŠ¶**ï¼šä¸Šä¼ æ–‡ä»¶åé•¿æ—¶é—´æ— å“åº”

**è§£å†³**ï¼š

1. **æ£€æŸ¥æ–‡ä»¶å¤§å°**
   - é™åˆ¶ï¼š10MB
   - å»ºè®®ï¼š< 5MB

2. **è°ƒæ•´ Worker è¶…æ—¶**
   å·²åœ¨ Dockerfile è®¾ç½®ï¼š
   ```dockerfile
   CMD ["gunicorn", "--timeout", "120", ...]
   ```

3. **ä½¿ç”¨æ›´é«˜è´¨é‡çš„å›¾ç‰‡**
   - DPI â‰¥ 300
   - æ¸…æ™°ã€æ— æ¨¡ç³Š

---

## ğŸ“Š æå‡ OCR å‡†ç¡®ç‡

### 1. ä¸Šä¼ é«˜è´¨é‡æ–‡ä»¶

| å› ç´  | æ¨è | é¿å… |
|------|------|------|
| **æ ¼å¼** | PDF (æ–‡æœ¬), PNG, TIFF | å‹ç¼©è¿‡åº¦çš„ JPEG |
| **åˆ†è¾¨ç‡** | â‰¥ 300 DPI | < 200 DPI |
| **å…‰ç…§** | å‡åŒ€ã€å……è¶³ | é˜´å½±ã€åå…‰ |
| **è§’åº¦** | æ­£é¢æ‹æ‘„ | å€¾æ–œã€æ—‹è½¬ |
| **æ¸…æ™°åº¦** | æ¸…æ™°æ–‡å­— | æ¨¡ç³Šã€æ‰‹å†™ |

### 2. æ–‡ä»¶å‡†å¤‡å»ºè®®

âœ… **æœ€ä½³å®è·µ**ï¼š
- ä½¿ç”¨æ‰«æä»ªè€Œéæ‰‹æœºæ‹ç…§
- ç¡®ä¿æ–‡æ¡£å¹³æ•´
- ç™½è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—
- æ— æ°´å°æˆ–åŠé€æ˜å åŠ 

âŒ **é¿å…**ï¼š
- æ‰‹æœºæ‹ç…§ï¼ˆé™¤éé«˜æ¸…ä¸”å…‰çº¿å¥½ï¼‰
- æŠ˜ç—•æˆ–è¤¶çš±
- å½©è‰²èƒŒæ™¯
- è‰ºæœ¯å­—ä½“æˆ–æ‰‹å†™ä½“

---

## ğŸ¯ éƒ¨ç½²åæ£€æŸ¥æ¸…å•

æ›´æ–°éƒ¨ç½²åï¼Œé€é¡¹éªŒè¯ï¼š

- [ ] Render æ˜¾ç¤º "Live" çŠ¶æ€ï¼ˆç»¿è‰²ï¼‰
- [ ] `/health` ç«¯ç‚¹è¿”å› 200
- [ ] å¯ä»¥è®¿é—®ä¸»é¡µ
- [ ] ä¸Šä¼  PDF æµ‹è¯•æ–‡ä»¶ â†’ OCR å·¥ä½œ
- [ ] ä¸Šä¼  PNG æµ‹è¯•æ–‡ä»¶ â†’ OCR å·¥ä½œ
- [ ] ä¸Šä¼  JPEG æµ‹è¯•æ–‡ä»¶ â†’ OCR å·¥ä½œ
- [ ] ä¸­æ–‡å‘ç¥¨è¯†åˆ«æ­£å¸¸
- [ ] `test_ocr.py` æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ†˜ ä»ç„¶æœ‰é—®é¢˜ï¼Ÿ

### æ”¶é›†è¯Šæ–­ä¿¡æ¯ï¼š

1. **è¿è¡Œè¯Šæ–­è„šæœ¬**
   ```bash
   python test_ocr.py > ocr_test_result.txt
   ```

2. **æŸ¥çœ‹åº”ç”¨æ—¥å¿—**
   - Render Dashboard â†’ Logs
   - å¤åˆ¶ç›¸å…³é”™è¯¯ä¿¡æ¯

3. **æ£€æŸ¥ç¯å¢ƒå˜é‡**
   - Dashboard â†’ Environment
   - ç¡®è®¤æ‰€æœ‰å¿…éœ€å˜é‡å·²è®¾ç½®

4. **è”ç³»æ”¯æŒ**
   æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
   - è¯Šæ–­è„šæœ¬è¾“å‡º
   - é”™è¯¯æ—¥å¿—
   - æµ‹è¯•æ–‡ä»¶æ ·æœ¬
   - Render æœåŠ¡é…ç½®æˆªå›¾

---

## âœ¨ æ›´æ–°å®Œæˆï¼

å¦‚æœæ‰€æœ‰æ£€æŸ¥éƒ½é€šè¿‡ï¼Œæ‚¨çš„ OCR åŠŸèƒ½ç°åœ¨åº”è¯¥å®Œå…¨æ­£å¸¸å·¥ä½œï¼

**æµ‹è¯•å»ºè®®**ï¼š
1. ä¸Šä¼ å‡ ä¸ªä¸åŒç±»å‹çš„å‘ç¥¨
2. æ£€æŸ¥è‡ªåŠ¨å¡«å……çš„å‡†ç¡®ç‡
3. å°è¯•ä¸­è‹±æ–‡æ··åˆçš„å‘ç¥¨
4. æµ‹è¯•ä¸åŒæ ¼å¼ï¼ˆPDFã€PNGã€JPEGï¼‰

**æœŸæœ›ç»“æœ**ï¼š
- âœ… PDF (æ–‡æœ¬): 95%+ å‡†ç¡®ç‡
- âœ… é«˜è´¨é‡æ‰«æ: 85%+ å‡†ç¡®ç‡
- âœ… æ‰‹æœºç…§ç‰‡: 70%+ å‡†ç¡®ç‡

---

## ğŸ”„ åç»­æ›´æ–°

æ¯æ¬¡ä»£ç æ›´æ–°åï¼ŒRender ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼š

1. **æ¨é€åˆ° GitHub**
   ```bash
   git push origin main
   ```

2. **Render è‡ªåŠ¨éƒ¨ç½²**
   - æ— éœ€æ‰‹åŠ¨æ“ä½œ
   - æŸ¥çœ‹ Dashboard ç¡®è®¤

3. **éªŒè¯æ›´æ–°**
   - è¿è¡Œ `test_ocr.py`
   - æµ‹è¯•ä¸Šä¼ åŠŸèƒ½

---

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
